#!/usr/bin/env node

const program = require('commander');

const { performSteps } = require('../src/index');
const { tapPromise } = require('../src/utils/promise/tapPromise');

const MODE_AMD = 'amd';

program
  .version(require('../package.json').version)
  .option('-d, --dump', 'Show all information about the design system repository and NOT send to UXPin')
  .option('-s, --summary', 'Show only design system summary without building it')
  .option('--target <mode>', 'Set webpack libraryTarget mode', (mode) => mode || MODE_AMD)
  .option('--webpack-config <path>', 'Use custom webpack config', (path) => path || '')
  .option('--wrapper <path>', 'Use custom wrapper', (path) => path || '')
  .parse(process.argv);

return performSteps(program);
